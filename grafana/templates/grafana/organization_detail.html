{% extends "base.html" %}

{% block content %}


<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'grafana:org-list' %}">Organizations</a></li>
    <li class="breadcrumb-item active" aria-current="page"><a href="{% url 'grafana:org-detail' object.pk %}">{{object.name}}</a></li>
  </ol>
</nav>


<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active">
    <a href="#dashboards" aria-controls="dashboards" role="tab" data-toggle="tab">Dashboards</a>
  </li>
  <li role="presentation">
    <a href="#versions" aria-controls="versions" role="tab" data-toggle="tab">Versions</a>
  </li>
</ul>

<div class="tab-content">
  <div role="tabpanel" class="tab-pane active" id="dashboards">
    <table class="table table-bordered">
        <tr>
            <th>Title</th>
            <th>View</th>
            <th>Tags</th>
            <th>Last Updated</th>
        </tr>
{% for dash in dashboard_set.all %}
        <tr>
            <td><a href="{% url 'grafana:dash-detail' dash.pk %}">{{ dash.title }}</a></td>
            <td><a href="{{dash.get_public_link}}">View on Grafana</a></td>
            <td>
                <ul>
                {% for tag in dash.tag_set.all %}
                    <li><a href="{% url 'grafana:org-detail' object.pk %}?tag={{tag.term}}">{{tag.term}}</a></li>
                {% endfor %}
                </ul>
            </td>
            <td>{{dash.updated}}</td>
        </tr>
{% endfor %}
    </table>
  </div>

  <div role="tabpanel" class="tab-pane" id="versions">
    <table class="table table-bordered">
        <tr>
            <th>Title</th>
            <th>View</th>
            <th>Created</th>
            <th>Created By</th>
            <th>Message</th>
        </tr>
    {% for version in version_set %}
        <tr>
            <td><a href="{% url 'grafana:dash-detail' version.dashboard.pk %}">{{ version.dashboard.title }}</a></td>
            <td><a href="{{version.dashboard.get_public_link}}">View on Grafana</a></td>
            <td>{{version.created}}</td>
            <td>{{version.created_by.login}}</td>
            <td>{{version.message}}</td>
        </tr>
    {% endfor %}
    </table>
  </div>
</div>
{% endblock %}
